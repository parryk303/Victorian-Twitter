<!DOCTYPE html>
<html>
  <head>
    <link href="https://fonts.googleapis.com/css2?family=Ewert&family=Kumar+One+Outline&family=Rye&family=Smokum&family=Tangerine&display=swap" rel="stylesheet">
    <script src="jquery.js"></script>
    <script src="jquery.timeago.js"></script>
    <script src="dataGenerator.js"></script>
  </head>
  <body>
    <script>
      $(document).ready(function() {

        // Body
        var $body = $('body')
        .css('margin', '30px 30px 30px 30px')
        .css('background', 'url(backgrounds/bodyBackground.jpg)')
        .html('');

        // Header
        var $header = $('<header class="main"></header>')
        .css('background', 'url(backgrounds/headerBackground.jpg)')
        .css('display', 'grid')
        .css('grid-template-column', '1fr 1fr 1fr 1fr 1fr')
        .appendTo($body);

        // Title
        var $title = $('<h2 class="title">Twiddler!</h2>')
        .css('grid-column', '3')
        .css('margin', '10px 10px 10px 10px')
        .appendTo($header);

        // Flags
        var $flagLeft = $('<img src="https://i.gifer.com/EMcL.gif">')
        .css('grid-column', '1')
        .css('grid-row', '1')
        .css('height', '100px')
        .css('width', '150px')
        .css('margin', '10px 10px 10px 10px')
        .appendTo($header);
        var $flagRight = $('<img src="https://i.gifer.com/EMcL.gif">')
        .css('grid-column', '5')
        .css('grid-row', '1')
        .css('height', '100px')
        .css('width', '150px')
        .css('margin', '10px 10px 10px 10px')
        .appendTo($header);

        // Input Bar
        var $input = $('<div class="inputBar"></div>')
        .css('border', 'solid')
        .css('display', 'grid')
        .css('grid-template-rows', '400px 200px')
        .css('grid-template-columns', '400px 50px 400px')
        .css('justify-content', 'center')
        .css('background', 'url(backgrounds/victoria.jpg)')
        .css('box-shadow', '0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.8)')
        .appendTo('body');

        // Home
        var $home = $('<div id="home" class="main" onClick=window.location.href="https://boring-franklin-f4b385.netlify.app/";></div>')
        .css('border-width', '5px')
        .css('grid-column', '1')
        .css('grid-row', '1')
        .css('width', '100%')
        .css('height', '100%')
        .css('max-width', '371px')
        .css('max-height', '401px')
        .css('background', 'url(backgrounds/homeBackground.jpg)')
        .css('margin', '10px 10px 10px 10px')
        .appendTo($input)
        $('#home').mouseenter(() => {
          $home.css('border-color', 'yellow').css('border-width', '10px');
        });
        $('#home').mouseleave(() => {
          $home.css('border-color', 'black').css('border-width', '5px');
        });
        var $homeTitle = $('<p id="homeTitle" class="header">Home</p>').css('background-color', '#A6162B')
        .css('max-width', '200px')
        .appendTo($home);

        // Abount Info
        var $about = $('<div id="about" onClick=window.location.href="https://boring-franklin-f4b385.netlify.app/" class="main"></div>')
        .css('border-width', '10px')
        .css('grid-column', '3')
        .css('grid-row', '1')
        .css('width', '100%')
        .css('height', '100%')
        .css('max-width', '371px')
        .css('max-height', '401px')
        .css('margin', '10px 10px 10px 10px')
        .css('background', 'url(backgrounds/aboutBackground.jpg)')
        .appendTo($input)
        var $aboutTitle = $('<p id="aboutTitle" class="header">About</p>').css('background-color', '#4B5B90')
        .css('max-width', '230px')
        .appendTo($about)
        $('#about').mouseenter(() => {
          $about.css('border-color', 'yellow').css('border-width', '10px');
        });
        $('#about').mouseleave(() => {
          $about.css('border-color', 'black').css('border-width', '5px');
        });

        // Show More Tweets Button
        var $showMoreTweets = $('<button id="showMoreTweets" class="main"></button>')
        .css('grid-row', '1')
        .css('display', 'none')
        .css('grid-column', '2')
        .css('font-size', '1px')
        .css('width', '250px')
        .css('height', '300px')
        .css('margin', '10px 5px 10px 5px')
        .css('display', 'inline')
        .css('justify-content', 'center')
        .css('padding', '20px 20px 20px 20px')
        .css('align-content', 'center')
        .css('text-align', 'center')
        .css('border', 'solid')
        .css('border-radius', '20px')
        .css('box-shadow', '0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.8)')
        // $showMoreTweets.appendTo($input);
        $('#showMoreTweets').mouseenter(() => {
          $showMoreTweets.css('background', 'url("https://media2.giphy.com/media/5T06ftQWtCMy0XFaaI/giphy.gif?cid=ecf05e477zkdrziox2iv20jww2ryegaownh6j6rxoi9hlox6&rid=giphy.gif")')
        });
        $('#showMoreTweets').mouseleave(() => {
          $showMoreTweets.css('background', 'white');
        });

        // Write a Tweet Input
        var $write = $('<br><input id="write" class="geust" type="text" placeholder="Write a Tweet Here!" ></input>')
        .css('background', 'url(backgrounds/tweetBackground.jpg)')
        .css('grid-row', '2')
        .css('grid-column', '1')
        .css('width', '150%')
        .css('font-size', '16px')
        .css('margin', '30px 0px 15px 120px')
        .css('padding', '20px 20px 20px 20px')
        .css('align-content', 'center')
        .css('text-align', 'center')
        .css('border', 'solid')
        .appendTo($input);
        $('#write').mouseenter(() => {
          $home.css('background', 'url("https://media2.giphy.com/media/9T433esTXz1Kw/giphy.gif?cid=ecf05e47bf1a745e04cba507c73987e85a2b01df418c9cbe&rid=giphy.gif")')
          .css('background-size', 'cover');
          $homeTitle.remove();
          $aboutTitle.remove();
          $about.css('background', 'url("https://media2.giphy.com/media/e0uk2PnefcgrC/giphy.gif?cid=ecf05e479d8aa75276823f2ca3340d7d764223c68c87d200&rid=giphy.gif")')
          .css('background-size', 'cover');
        });
        $('#write').mouseleave(() => {
          $home.css('background', 'url(backgrounds/homeBackground.jpg)')
          $about.css('background', 'url(backgrounds/aboutBackground.jpg)')
          $homeTitle.appendTo($home);
          $aboutTitle.appendTo($about);
        });

        // Tweet Feed
        var $feed = $('<div></div>')
        .css('padding', '10px 10px 10px 10px')
        .css('margin', '30px 0px 30px 0px')
        .css('background-color', 'tan')
        .css('border', 'solid')
        .css('box-shadow', '0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.8)')
        .css('background', 'url(backgrounds/feedBackground.jpg)')
        .css('display', 'grid')
        .css('justify-content', 'center')
        .appendTo($body);

        // Footer
        var $footer = $('<footer class="main"></footer>')
        .css('background', 'url(backgrounds/gothic.jpg)')
        .css('height', '390px')
        .css('max-height', '390px')
        .appendTo($body);
        var $footerTitle = $('<p class="footerTitle">Thanks for dropping by!</p>').css('background-color', 'white')
        .css('margin', '100px 20px 20px 30px')
        .css('height', '70px')
        .css('border', 'solid')
        .css('display', 'flex-box')
        .css('font-size', '50px')
        .css('font-family', '"Ewert", cursive')
        .css('text-align', 'center')
        .css('align-items', 'center')
        .css('box-shadow', '0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.8)')
        .appendTo($footer);

        // Get tweets from dataGenerator
        const generateTweets = () => {
        $feed.html('');

        var index = streams.home.length - 1;
        while(index >= 0) {
          var tweet = streams.home[index];
          var $tweet = $('<p></p>')
          var $message = $('<div></div>')
          .html(tweet.message)
          .css('grid-row', '3')
          .css('grid-column', '2')
          .css('font-size', '50px')
          .css('font-family', '"Smokum", cursive')
          .appendTo($tweet);

          var $userTime = $('<div></div>')
          .html('<b>@' + tweet.user + '</b>' + ' tweeted ' + $.timeago(tweet.created_at))
          .css('grid-row', '1')
          .css('grid-column', '2/3')
          .css('font-size', '50')
          .css('font-family', '"Rye", cursive')
          .css('margin', '40px 70px 0px 0px')
          .appendTo($tweet);

          var $pic = $('<a id="userHist" href="#' + tweet.user + '"></a>')
          .css('grid-row', '1')
          .css('grid-column', '1')
          .prependTo($tweet);

          if (tweet.user === 'sharksforcheap') {
            $pic.html('<img class="pic" src="profilePics/packington.jpg">');
          }
          if (tweet.user === 'mracus') {
            $pic.html('<img class="pic" src="profilePics/churchill.jpg">');
          }
          if (tweet.user === 'douglascalhoun') {
            $pic.html('<img class="pic" src="profilePics/bourke.jpg">');
          }
          if (tweet.user === 'shawndrost') {
            $pic.html('<img class="pic" src="profilePics/stanley.jpg">');
          }
          if (tweet.user === 'guest') {
            $pic.html('<img class="pic" src="profilePics/harris.jpg">');
          }

          $tweet.css('display', 'grid')
          .css('grid-template-rows', '100px 1fr 100px 50px')
          .css('grid-template-columns', '300px 500px 50px')
          .css('background', 'url(backgrounds/tweetBackground.jpg)')
          .css('border', 'solid')
          .css('border-radius', '15px')
          .css('text-align', 'center')
          .css('margin', '10px 55px 10px 55px')
          .css('width', '850px')
          .css('max-width', '850px')
          .css('box-shadow', '0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.8)')
          .appendTo($feed);

          $('.pic').css('border', 'solid')
          .css('border-width', '5px')
          .css('margin', '10px 5px 0px 0px')
          .css('border-radius', '50%')
          .css('border-color', 'black');

          index -= 1;
        }

        // Display user tweets
        $('a').on('click', function(e) {
          e.preventDefault();
          loadUserTweets(this.getAttribute('href'));
          });
        }
          generateTweets();

       // Display tweets
       $showMoreTweets.on('click', (e) => {
          e.preventDefault();
          generateTweets();
        });
       var loadUserTweets = (user) => {
          $('div a[href!="' + user + '"]').parent().remove();
          var $showUserTweets = $('<div id="info"><b>Showing tweets from @' + user.slice(1) + '. Click Home to go back.' + '</b></div>');
          $('button').after($showUserTweets);
        };

        // Write tweets
        $('input').keypress(function (e) {
        if (e.which === 13) {
        window.visitor = 'guest';
        if (!streams.users[window.visitor]) {
          streams.users[window.visitor] = [];
        }
        writeTweet($(this).val());
        $(this).val('');
        generateTweets();
      }
      });

      // Class CSS
      $(".title").css('background-color', 'white')
        .css('border', 'solid')
        .css('font-size', '85px')
        .css('font-family', '"Ewert", cursive')
        .css('text-align', 'center')
        .css('padding', '20px, 20px, 20px, 20px')
        .css('box-shadow', '0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.8)');

        $(".header").css('border', 'solid')
        .css('display', 'flex-box')
        .css('font-size', '50px')
        .css('font-family', '"Ewert", cursive')
        .css('text-align', 'center')
        .css('align-items', 'center')
        .css('max-height', '60px')
        .css('margin', '0 auto')
        .css('box-shadow', '0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.8)');

        $(".main").css('border', 'solid')
        .css('display', 'grid')
        .css('font-size', '50px')
        .css('font-family', '"Ewert", cursive')
        .css('text-align', 'center')
        .css('margin', '20px, 20px, 20px, 20px')
        .css('box-shadow', '0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.8)');

        $(".geust").css('display', 'grid')
        .css('border', 'solid')
        .css('border-radius', '15px')
        .css('font-size', '55px')
        .css('font-family', '"Smokum", cursive')
        .css('text-align', 'center')
        .css('box-shadow', '0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.8)');
      });
    </script>
  </body>
</html>